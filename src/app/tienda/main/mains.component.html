<mat-sidenav-container class="sidenav-container">

  <!-- Sidebar lateral -->
  <mat-sidenav #sidenav mode="side" position="end" class="cart-sidenav" [fixedInViewport]="true" [autoFocus]="false">
    <div class="cart-header">
      <h1>🛒 Tu Carrito</h1>
      <button class="close-btn" (click)="sidenav.close()">❌</button>
    </div>

    <!-- Contenedor flexible -->
    <div class="cart-container">

      <!-- Lista de productos en el carrito -->
      <div class="cart-items">
        <div *ngFor="let item of carrito" class="cart-item">
          <img [src]="item.foto" class="cart-img">
          <div>
            <p class="cart-title">{{ item.titulo }} ({{ item.talla }} - {{ item.color }})</p>
            <div class="cart-item-info">
              <p><strong>{{ _formato.monedaChange(3, 2, item.costoTotal) }}</strong></p>
              <p>Cantidad: <strong>{{ item.cantidad }}</strong></p>
              <button class="remove-button" (click)="eliminarDelCarrito(item.id)">❌</button>
            </div>
          </div>
        </div>

        <div class="empty-cart" *ngIf="carrito.length === 0">
          <h2>Tu Carrito está vacío 🛒</h2>
        </div>
      </div>

      <!-- Botón fijo en la parte inferior -->
      <div class="cart-footer">
        <button class="finalizar-compra-button" (click)="irAFormulario()">
          Finalizar Compra ({{ _formato.monedaChange(3, 2, totalPagar) }})
        </button>
      </div>

    </div>
  </mat-sidenav>

  <!-- Contenido Principal -->
  <mat-sidenav-content class="main-content">
    
    <div class="row">
      <div class="col-12">
        <div class="d-flex justify-content-center" style="text-align: center; background: black; color: white;"
        [ngStyle]="{'background-color': data['configuracion']?.colorFondo, 'color': data['configuracion']?.colorTexto}"
        >
          <div class="moving-banner">
            <div class="moving-text">
              <h4>{{ '🚀 '+ data['configuracion']?.txtbanner + '🚀' || '🚀 Envío Gratis - Pagos Contra Entrega 🚀' }}</h4>
              <h4>{{ '🚀 '+ data['configuracion']?.txtbanner + '🚀' || '🚀 Envío Gratis - Pagos Contra Entrega 🚀' }}</h4>
              <h4>{{ '🚀 '+ data['configuracion']?.txtbanner + '🚀' || '🚀 Envío Gratis - Pagos Contra Entrega 🚀' }}</h4>
              <h4>{{ '🚀 '+ data['configuracion']?.txtbanner + '🚀' || '🚀 Envío Gratis - Pagos Contra Entrega 🚀' }}</h4>
              <h4>{{ '🚀 '+ data['configuracion']?.txtbanner + '🚀' || '🚀 Envío Gratis - Pagos Contra Entrega 🚀' }}</h4>
              <h4>{{ '🚀 '+ data['configuracion']?.txtbanner + '🚀' || '🚀 Envío Gratis - Pagos Contra Entrega 🚀' }}</h4>
            </div>
          </div>
        </div>
      </div>
    </div>

    <app-menu-lateral></app-menu-lateral>
    <router-outlet></router-outlet>

    <!-- Footer flotante del carrito -->
    <footer class="cart-footer-fixed" *ngIf="carrito.length > 0">
      <button class="cart-button animated-bounce" (click)="abrirCarrito()">
        🛒 Mi Carrito ({{ carrito.length }})
      </button>
    </footer>

  </mat-sidenav-content>

</mat-sidenav-container>
